package player {	import flash.display.MovieClip;	import flash.events.MouseEvent;	import player.TextUtil;	import flash.events.Event;	import fl.text.TLFTextField;	import flash.display.Loader;	import flash.net.URLRequest;		public class Section extends MovieClip{		public var desc2:TLFTextField;				public var xml:XML;		public function Section(xml=null) {			this.xml = xml;			addEventListener(Event.ADDED_TO_STAGE, onAdded);			//addEventListener(MouseEvent.CLICK, onClick);		}		private function onClick(e):void		{			TextUtil.importText(desc2, xml.toString());		}		private function onAdded(event):void		{			//trace(xml.toString(), desc2);			s.scrollTarget = desc2;			TextUtil.addScroll(s);            			var d = desc2.width;                TextUtil.importText(desc2, xml.toString());                //desc2.border = true;                desc2.scaleX = desc2.scaleY = 1.5;                if(img)                    desc2.width = d/1.5;                else                    desc2.width = d/1.5;                desc2.height = s.height/1.5;			if(img)				img.visible = false;			if(img2)				img2.visible = false;			if(img && xml.@path != undefined)			{				var i:Image = new Image();				i.bg = img;				i.load(xml);				addChild(i);				addZoomButton(i.bg, xml.@path, xml.@image1Text, xml.@zoom1);			}			if(img && xml.@path2a != undefined)			{				var i:Image = new Image();				var a:XML = <a></a>;				a.@path = xml.@path2a;				i.bg = img;				i.load(a);				addChild(i);				addZoomButton(i.bg, a.@path, xml.@image2aText, xml.@zoom2a);			}			if(img2 && xml.@path2b != undefined)			{				var i:Image = new Image();				var a:XML = <a></a>;				a.@path = xml.@path2b;				i.bg = img2;				i.load(a);				addChild(i);				addZoomButton(i.bg, a.@path, xml.@image2bText, xml.@zoom2b);			}						desc2.textFlow.paddingTop = 5;					}		private function addZoomButton(i, p, caption, enabled):void		{			if(enabled != "true") return;			var button:ZoomButton = new ZoomButton();			addChild(button);			button.x = i.x + i.width - 10 - button.width;			button.y = i.y + 10;			button.addEventListener(MouseEvent.CLICK, function(e){									var zoom:ImagePopup = new ImagePopup();									stage.addChild(zoom);									var b_image:Loader = new Loader();									b_image.contentLoaderInfo.addEventListener(Event.COMPLETE, function(event){																			   zoom.addImage(event.target.loader.content, caption)																			   });									var path = p+"_big.jpg";									path = path.replace(".jpg_big.jpg", "_big.jpg");									b_image.load(new URLRequest(Player.PREFIX + path));													});		}					}}